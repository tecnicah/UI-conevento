<div class="bg">
  <div class="spacer"></div>
  <!--STEPPER PARA DESKTOP-->
  <div class="d-none d-md-block">
    <div class="container">
      <div class="row stepers steps-container">
        <div class="col-4 title-step">
          Arma tu evento <br>
          en <span class="Reboto-medium">s√≥lo 3 pasos</span> üëâ
        </div>

        <div class="col-2 step no-padding">
          <span (click)="set_stepper(1);" class="header"
            [ngClass]="{'selected': steps.uno == 'selected', 'ready': steps.uno == 'complete'}">
            <span class="material-icons complete">
              check_circle
            </span>
            <span class="material-icons active">
              radio_button_checked
            </span>
            <div class="progress" style="height: 6px;">
              <div class="progress-bar" role="progressbar" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">
              </div>
            </div>
          </span>

          <div class="info" (click)="set_stepper(1);">
            <span class="Reboto-medium">1.- Agenda</span><br>
            <span class="info description">Especifica el momento, el lugar y los invitados de tu evento</span>
          </div>
        </div>

        <div class="col-2 step no-padding">
          <span class="header" (click)="set_stepper(2);"
            [ngClass]="{'selected': steps.dos == 'selected', 'ready': steps.dos == 'complete', 'next': steps.dos == 'next'}">
            <span class="material-icons complete">
              check_circle
            </span>
            <span class="material-icons active">
              radio_button_checked
            </span>
            <div class="progress" style="height: 6px;">
              <div class="progress-bar" role="progressbar" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">
              </div>
            </div>
          </span>

          <div class="info" (click)="set_stepper(2);">
            <span class="Reboto-medium">2.- Elige tus servicios</span><br>
            Selecciona el personal y <br>
            art√≠culos que requieras.
          </div>
        </div>

        <div class="col-2 step no-padding">
          <span class="header" (click)="set_stepper(3);"
            [ngClass]="{'selected': steps.tres == 'selected', 'ready': steps.tres == 'complete', 'next': steps.tres == 'next'}">
            <span class="material-icons complete">
              check_circle
            </span>
            <span class="material-icons active">
              radio_button_checked
            </span>
            <div class="progress" style="height: 6px;">
              <div class="progress-bar" role="progressbar" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">
              </div>
            </div>
          </span>

          <div class="info" (click)="set_stepper(3);">
            <span class="Reboto-medium">3.- Confirma y paga</span><br>
            Elige la opci√≥n de pago <br>
            de manera segura
          </div>
        </div>
        <div class="col-2 no-padding finish-step">
          <img src="./assets/wizard/Group 92.svg" alt="">
          <span class="Reboto-medium">¬°Disfruta <br> tu evento!</span>
        </div>

      </div>
    </div>
  </div>
  <!--STEPPER PARA MOBILE-->
  <div class="d-block d-md-none">
    <div class="container">
      <div class="row stepers steps-container">

        <div class="col-3 step no-padding">
          <span (click)="set_stepper(1);" class="header"
            [ngClass]="{'selected': steps.uno == 'selected', 'ready': steps.uno == 'complete'}">
            <span class="material-icons complete">
              check_circle
            </span>
            <span class="material-icons active">
              radio_button_checked
            </span>
            <div class="progress" style="height: 6px;">
              <div class="progress-bar" role="progressbar" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">
              </div>
            </div>
          </span>

          <div class="info" (click)="set_stepper(1);">
            <span class="Reboto-medium">1.- Agenda</span>
          </div>
        </div>

        <div class="col-3 step no-padding">
          <span class="header" (click)="set_stepper(2);"
            [ngClass]="{'selected': steps.dos == 'selected', 'ready': steps.dos == 'complete', 'next': steps.dos == 'next'}">
            <span class="material-icons complete">
              check_circle
            </span>
            <span class="material-icons active">
              radio_button_checked
            </span>
            <div class="progress" style="height: 6px;">
              <div class="progress-bar" role="progressbar" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">
              </div>
            </div>
          </span>

          <div class="info" (click)="set_stepper(2);">
            <span class="Reboto-medium">2.- Elige tus servicios</span>
          </div>
        </div>

        <div class="col-3 step no-padding">
          <span class="header" (click)="set_stepper(3);"
            [ngClass]="{'selected': steps.tres == 'selected', 'ready': steps.tres == 'complete', 'next': steps.tres == 'next'}">
            <span class="material-icons complete">
              check_circle
            </span>
            <span class="material-icons active">
              radio_button_checked
            </span>
            <div class="progress" style="height: 6px;">
              <div class="progress-bar" role="progressbar" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">
              </div>
            </div>
          </span>

          <div class="info" (click)="set_stepper(3);">
            <span class="Reboto-medium">3.- Confirma y paga</span>
          </div>
        </div>

        <div class="col-3 no-padding finish-step">
          <img src="./assets/wizard/Group 92.svg" alt="">
          <span class="Reboto-medium">¬°Disfruta <br> tu evento!</span>
        </div>

      </div>
    </div>
  </div>

  <div class="spacer"></div>


  <!--------------------------------------------- paso 1-------------------------------------->
  <!--------------------------------------------- paso 1-------------------------------------->
  <!--------------------------------------------- paso 1-------------------------------------->

  <div class="container" [ngClass]="steps_css.uno">

    <div class="titulos_stepper">
      <img src="./assets/wizard/step_uno.png" alt="" class="titulos_stepper_img">
      &nbsp;
      <span class="Reboto-medium">Agenda tu evento</span>
    </div>

    <form [formGroup]="firstFormGroup" (ngSubmit)="onSubmit()">
      <div class="row contenedor_uno" style="margin: 1% auto; border-radius: 10px;">
        <div class="col-md-9">
          <p class="Reboto-medium subtitle">¬øCuando ser√° el momento de tu evento?</p>
        </div>
        <div class="col-md-5"> 
          
          <p>Evento Inicia* &nbsp;<span style="color: #666666; font-style: italic; font-size: 13px;">(F. M√≠nima: {{min_date_}})</span></p>
          <div class="input-group mb-3 margen_cero">
            <input (change)="compare_inicio_date();" type="datetime-local" class="form-control" placeholder="Fecha de inicio" (change)="method_name()"
              id="start" aria-label="Fecha y hora inicio" aria-describedby="basic-addon1"
              [ngClass]="{ 'is-invalid': (submitted && f.fechaHoraInicio.errors) || f_inicio_error }" formControlName="fechaHoraInicio">

            <div *ngIf="(submitted && f.fechaHoraInicio.errors)" class="invalid-feedback">
              <div *ngIf="f.fechaHoraInicio.errors.required">Campo requerido</div> 
            </div>
            <div *ngIf="f_inicio_error" style="width: 100%;  margin-top: 0.25rem; font-size: 80%; color: #dc3545;">
              <div >Fecha m√≠nima {{min_date_}}</div>
            </div>
          </div>
        </div>
        <div class="col-md-5">
          <p>Evento Termina* &nbsp;<span style="color: #666666; font-style: italic; font-size: 13px;">(F. M√≠nima: {{min_date_2}})</span></p>
          <div class="input-group mb-3 margen_cero">
            <input (change)="compare_fin_date();" type="datetime-local" [min]="firstFormGroup.value.fechaHoraInicio" class="form-control"
              placeholder="Fecha y hora final" aria-label="Fecha y hora final" aria-describedby="basic-addon1"
              [ngClass]="{ 'is-invalid': (submitted && f.fechaHoraFin.errors) || f_fin_error }" formControlName="fechaHoraFin">
            <div *ngIf="submitted && f.fechaHoraFin.errors" class="invalid-feedback">
              <div *ngIf="f.fechaHoraFin.errors.required">Campo requerido</div>
            </div>
            <div *ngIf="f_fin_error" style="width: 100%;  margin-top: 0.25rem; font-size: 80%; color: #dc3545;">
              <div >Fecha m√≠nima {{min_date_}}</div>
            </div>
          </div>
        </div>
        <div class="col-md-4" style="display: none;">
          <p>Gente esperada </p>
          <div class="input-group mb-3 margen_cero">
            <input [min]="0" type="number" (change)="no_menor_cero();" class="form-control" placeholder="Gente esperada"
              aria-label="Gente esperada" aria-describedby="basic-addon1"
              [ngClass]="{ 'is-invalid': submitted && f.genteEsperada.errors }" formControlName="genteEsperada">
            <div *ngIf="submitted && f.genteEsperada.errors" class="invalid-feedback">
              <div *ngIf="f.genteEsperada.errors.required">Campo requerido</div>
            </div>
          </div>
        </div>
        <div class="col-md-12" style="padding-bottom: 20px;">
        </div>

        <div class="col-md-4">
          <p class="Reboto-medium subtitle">¬øQu√© lugar elejiste?</p>
        </div>
        <div class="col-md-4"></div>
        <div class="col-md-4"></div>

        <div class="col-md-2">
          <p>Ciudad *</p>
          <select class="form-select quiz_select form-control" aria-label="Default select example"
            [ngClass]="{ 'is-invalid': submitted && f.ciudad.errors }" formControlName="ciudad">
            <option value=1 selected>CDMX</option>
          </select>
          <div *ngIf="submitted && f.ciudad.errors" class="invalid-feedback">
            <div *ngIf="f.ciudad.errors.required">Campo requerido</div>
          </div>
        </div>

        <div class="col-md-4">
          <p>Alcaldia o municipio *</p>
          <select plceholder="Selecciona Alcald√≠a" class="form-select quiz_select form-control"
            aria-label="Default select example" [ngClass]="{ 'is-invalid': submitted && f.idCatMunicipio.errors }"
            formControlName="idCatMunicipio">
            <option value=1>Benito Ju√°rez</option>
            <option value=2> Coyoacan</option>
            <option value=3>Magdalena Contreras </option>
            <option value=4>Venustiano Carranza</option>
            <option value=5>Cuajimalpa</option>
            <option value=6>Alvaro Obreg√≥n</option>
            <option value=7>Azcapotzalco</option>
            <option value=8>Cuahutemoc</option>
            <option value=9>Tlapan</option>
          </select>
          <div *ngIf="submitted && f.idCatMunicipio.errors" class="invalid-feedback">
            <div *ngIf="f.idCatMunicipio.errors.required">Campo requerido</div>
          </div>
        </div>

        <div class="col-md-4" style="display: none;">
          <p>C√≥digo postal (Opcional)</p>
          <div class="input-group mb-3 margen_cero">
            <input type="text" class="form-control" placeholder="C√≥digo postal" aria-label="C√≥digo postal"
              aria-describedby="basic-addon1" [ngClass]="{ 'is-invalid': submitted && f.cp.errors }"
              formControlName="cp">
            <div *ngIf="submitted && f.cp.errors" class="invalid-feedback">
              <div *ngIf="f.cp.errors.required">Campo requerido</div>
            </div>
          </div>
        </div>

        <div class="col-md-6">
          <p>Calle y numero exterior *</p>
          <div class="input-group mb-3 margen_cero">
            <input type="text" class="form-control" placeholder="Calle y numero exterior"
              aria-label="Calle y numero exterior" aria-describedby="basic-addon1"
              [ngClass]="{ 'is-invalid': submitted && f.calleNumero.errors }" formControlName="calleNumero">
            <div *ngIf="submitted && f.calleNumero.errors" class="invalid-feedback">
              <div *ngIf="f.calleNumero.errors.required">Campo requerido</div>
            </div>
          </div>
        </div>

        <div class="col-md-6">
          <p>Colonia *</p>
          <div class="input-group mb-3 margen_cero">
            <input type="text" class="form-control" placeholder="Colonia" aria-label="Colonia"
              aria-describedby="basic-addon1" [ngClass]="{ 'is-invalid': submitted && f.colonia.errors }"
              formControlName="colonia">
            <div *ngIf="submitted && f.colonia.errors" class="invalid-feedback">
              <div *ngIf="f.colonia.errors.required">Campo requerido</div>
            </div>
          </div>
        </div>
        <div class="col-md-6">

        </div>






        <!-- <div class="col-md-6">
          <p>Nombre del evento (Opcional)</p>
          <div class="input-group mb-3 margen_cero">
            <input type="text" class="form-control" placeholder="Nombre del evento" aria-label="Nombre del evento"
              aria-describedby="basic-addon1" [ngClass]="{ 'is-invalid': submitted && f.nombreEvento.errors }"
              formControlName="nombreEvento">
            <div *ngIf="submitted && f.nombreEvento.errors" class="invalid-feedback">
              <div *ngIf="f.nombreEvento.errors.required">Campo requerido</div>
            </div>
          </div>
        </div> -->


      </div>
      <div class="contenedor_uno_contenedor_botones form-group" style="justify-content: none;">
        <button class="btn contenedor_uno_siguiente Reboto-medium">
          Siguiente
        </button>
        <!-- <button class="btn contenedor_uno_atras Reboto-medium" [routerLink]="['/']"
          routerLinkActive="router-link-active">Regresar</button> -->
      </div>
    </form>
  </div>

  <!-----------------------------------------paso 2---------------------------------------->
  <!-----------------------------------------paso 2---------------------------------------->
  <!-----------------------------------------paso 2---------------------------------------->

  <div class="container" [ngClass]="steps_css.dos">
    <!-- <div class="col-md-12"> 
      <button class="btn contenedor_uno_atras Reboto-medium" (click)="after()"
      >Regresar</button>
    </div> -->
    <div class="titulos_stepper">
      <img src="./assets/wizard/step_dos.png" alt="" class="titulos_stepper_img">
      &nbsp;
      <span class="Reboto-medium">Elige tus servicios</span>
    </div>
    <!-- <div  class="col-md-3">
      <img src="./assets/SeleccionarServicios/bi_arrow-left-short.png" alt="" class="pointer" >
    </div> -->
    <div class="row contenedor_cuatro">
      <div class="col-md-7">
        <div class="row">

          <div class="col-md-6" *ngFor="let item of categorias">
            <div class="servicios_contenedor_imagen pointer zoom" (click)="selectServices(item);">
              <div id="a" class="servicios_contenedor_interno">
                <div class="radio">
                  <span class="span_select" style="color: #666666;" *ngIf="item.numproductos.length > 0">
                    {{item.numproductos.length}} Elementos
                    eleccionados</span>
                  <div class="radio_circle">
                    <img src="./assets/wizard/Vector.svg" alt="" *ngIf="item.checked" class="radio_img">
                  </div>
                </div>
                <img [src]="item.imagenSeleccion" alt="" class="servicios_img_principal">
                <p class="servicios_color_texto reboto-regular">{{item.categoria}}</p>
                <div class="grow">
                  <img src="./assets/wizard/bi_info-circle.png" alt="" class="servicios_img_informacion">
                </div>

              </div>
              <div id="b" class="none size" style="color: #444444; font-weight: bold;">{{item.descripcion}}</div>
            </div>
          </div>
        </div>
      </div>

      <div class="col-md-5">
        <div class="servicios servicios_bgcolor">
          <img src="./assets/wizard/Group 121.png" alt="" class="servicios_bgcolor_img">

          <ngb-accordion #a="ngbAccordion" activeIds="custom-panel-1">
            <ngb-panel id="custom-panel-1">
              afuera
              <ng-template ngbPanelHeader let-opened="opened">
                <div class="d-flex align-items-center justify-content-between">
                  <p class="Reboto-medium pTotal">Solicitud de servicios</p>
                  <button ngbPanelToggle class="btn btn-link p-0">
                    <!--OPEN ICON-->
                    <span class="material-icons icon_color" *ngIf="!opened">
                      expand_more
                    </span>
                    <!--CLOSE ICON-->
                    <span class="material-icons icon_color" *ngIf="opened">
                      expand_less
                    </span>
                  </button>
                </div>
              </ng-template>

              <ng-template ngbPanelContent>

                <div class="servicios_justify">
                  <div *ngFor="let item of Productos_listado">
                    <!-- <img style="width: 16px; cursor: pointer;" src="https://img.icons8.com/ios/50/000000/delete-sign--v1.png"/>-->
                    <img style="width: 16px; cursor: pointer;" (click)="modify_list(item)"
                      src="https://img.icons8.com/material-outlined/64/000000/trash--v1.png" />
                    <span class="productlist">
                      {{item.cantidadUnidades}} {{item.Nombre}}
                    </span>
                    <span class="productlist" *ngIf="item.cantidadHoras != null && item.especificarTiempo != null"
                      style="font-style: italic;"> ({{item.cantidadHoras}} hrs)</span>
                    <span class="productlist_precio"> {{item.Precio *
                      item.cantidadUnidades * item.cantidadHoras | currency}}
                    </span>
                  </div>
                  <div *ngIf="flete > 0">
                    <img src="./assets/home-dos/ship.png" style="width: 28px;">
                    <span class="productlist">
                      &nbsp;&nbsp;Servicio de flete (Mobiliario)
                    </span>
                    <span class="productlist_precio">
                      $500.00
                    </span>
                  </div>
                  <div class="separator"></div>

                  <div class="total">
                    <span class="p">Subtotal del carrito</span>
                    <span class="p">{{Subtotal | currency}}</span>
                  </div>

                  <div class="total">
                    <span class="p">IVA</span>
                    <span class="p">{{IVA | currency}}</span>
                  </div>
                </div>
              </ng-template>
            </ngb-panel>
          </ngb-accordion>
          <div class="servicios_justify" style="padding: 20px;">
            <div class="separator"></div>

            <div class="total">
              <span class="p Reboto-medium">Servicios</span>
              <span class="p Reboto-medium">{{Productos_listado.length}}</span>
            </div>

            <div class="separator"></div>

            <div class="total">
              <span class="pTotal Reboto-medium">Total</span>
              <span class="p Reboto-medium">{{total | currency}}</span>
            </div>
            <div class="pagar_contenedor_botones form-group" *ngIf="Productos_listado.length != 0">
              <button class="btn pagar_siguiente Reboto-medium" (click)="next();">Continuar</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="contenedor_uno_contenedor_botones form-group">
      <button class="btn contenedor_uno_atras Reboto-medium" (click)="after()">Regresar</button>
    </div>

  </div>

  <!----------------------------------------------------------paso 3------------------------------->
  <!----------------------------------------------------------paso 3------------------------------->
  <!----------------------------------------------------------paso 3------------------------------->

  <div [ngClass]="steps_css.tres">
    <!----------------------------------------------------------paso 3a ------------------------------->
    <div class="container" [ngClass]="step0">
      <div class="titulos_stepper">
        <img src="./assets/wizard/step_tres.png" alt="" class="titulos_stepper_img">
        &nbsp;
        <span class="Reboto-medium">Confirma y Paga</span>
      </div>


      <div class="row contenedor_cuatro">
        <div class="col-md-7">
          <div class="eventos_seleccionados">
            <div class="col-md-12">
              <!-- <div class="col-md-4" >
              <div *ngIf="appComponent.data_user_model_app != null" style="margin-bottom: 17px;"
                (click)="set_datos_cuenta();">
                <img src="./assets/Home/copy_profile.png" alt="" height="35px" width="35px" style="cursor:pointer;">
                <span
                  style="cursor:pointer; margin-left: 5px; color: blue; font-size: 15px; font-weight: bold; text-decoration: underline;">
                  Copiar de mi cuenta
                </span>
              </div>
            </div> -->
              <div class="col-md-6">
                <p class="Reboto-medium subtitle">Datos de contacto</p>
              </div>
              <p>Contratante * <img src="./assets/Home/copy_profile.png"
                  *ngIf="appComponent.data_user_model_app != null" (click)="set_datos_cuenta();" alt="" height="25px"
                  width="25px" style="margin-left: 4px; cursor:pointer;">
                <span (click)="set_datos_cuenta();" *ngIf="appComponent.data_user_model_app != null"
                  style="cursor:pointer; margin-left: 2px; color: blue; font-size: 15px; font-weight: bold; text-decoration: underline;">
                  Copiar de mi cuenta
                </span>
              </p>
              <div class="input-group mb-3 margen_cero">
                <input type="text" class="form-control" placeholder="Nombre del contratante"
                  aria-label="Datos del contratante" aria-describedby="basic-addon1" (focusout)="validate_nombre();"
                  [ngClass]="{ 'is-invalid': error_nombre }" [(ngModel)]="nombreContratane">
                <div *ngIf="error_nombre" class="invalid-feedback">
                  <div *ngIf="error_nombre">Campo incompleto</div>
                </div>
              </div>
            </div>
            <div class="col-md-12">
              <p>Correo electr√≥nico *</p>
              <div class="input-group mb-3 margen_cero">
                <input type="text" class="form-control" placeholder="Correo electr√≥nico" aria-label="Correo electr√≥nico"
                  aria-describedby="basic-addon1" [ngClass]="{ 'is-invalid': error_correo }" [pattern]="emailRegex"
                  [(ngModel)]="correo" (focusout)="validate_correo();">
                <div *ngIf="error_correo" class="invalid-feedback">
                  <div *ngIf="error_correo">Campo incorrecto</div>
                </div>
                <!-- <div *ngIf="f.correo.errors?.pattern" class="invalid-feedback"> 
                  Formato de correo incorrecto
                </div>-->
              </div>
            </div>

            <div class="col-md-12">
              <p>Tel√©fono fijo o celular *</p>
              <div class="input-group mb-3 margen_cero">
                <input type="tel" class="form-control" placeholder="Tel√©fono fijo o celular"
                  aria-label="Tel√©fono fijo o celular" aria-describedby="basic-addon1"
                  [ngClass]="{ 'is-invalid': error_telefono }" [(ngModel)]="telefono" (focusout) ="validate_telefono();">
                <div *ngIf="error_telefono" class="invalid-feedback">
                  <div *ngIf="error_telefono">Campo incompleto</div>
                </div>
              </div>
            </div>
            <!-- <p class="Reboto-medium eventos_seleccionados_titulo" style="font-size: 18px;">
              <img src="./assets/Home/profile.png" width="49px">
              Datos de contacto
            </p>
            <div class="eventos_seleccionados_flex">
              <span class="Reboto-medium eventos_seleccionados_titulo">Nombre contratante <span
                  class="eventos_seleccionados_descripcion">{{data_model.nombreContratane}}</span></span>
            </div>
            <div class="eventos_seleccionados_flex">
              <span class="Reboto-medium eventos_seleccionados_titulo">Correo electr√≥nico <span
                  class="eventos_seleccionados_descripcion">{{data_model.correo}}</span></span>
            </div>
            <div class="eventos_seleccionados_flex">
              <span class="Reboto-medium eventos_seleccionados_titulo">Tel√©fono <span
                  class="eventos_seleccionados_descripcion">{{data_model.telefono}}</span></span>
            </div>  -->
          </div>
          <div class="eventos_seleccionados">
            <p class="Reboto-medium eventos_seleccionados_titulo" style="font-size: 18px;">
              <img src="./assets/Home/date2.png" width="45px">
              Agendaste tu evento
            </p>

            <div class="eventos_seleccionados_flex">
              <span class="Reboto-medium eventos_seleccionados_titulo">Inicio&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
                  class="eventos_seleccionados_descripcion">{{data_model.fechaHoraInicio | date:
                  'dd/MM/yyyy - hh:mm a'}}</span></span>
            </div>
            <div class="eventos_seleccionados_flex">
              <span
                class="Reboto-medium eventos_seleccionados_titulo">Fin&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
                  class="eventos_seleccionados_descripcion">{{data_model.fechaHoraFin | date:
                  'dd/MM/yyyy - hh:mm a'}}</span></span>
            </div>
          </div>

          <div class="eventos_seleccionados">
            <p class="Reboto-medium eventos_seleccionados_titulo" style="font-size: 18px;">
              <img src="./assets/Home/2898588.png" width="47px">
              En la direcci√≥n
            </p>
            <div class="eventos_seleccionados_flex">
              <span class="eventos_seleccionados_descripcion">
                <span style="font-weight: bold;">Calle: </span> {{data_model.calleNumero}},
                <span style="font-weight: bold;">Colonia: </span> {{data_model.colonia}},
                <span style="font-weight: bold;">CP:</span>
                <span *ngIf="data_model.cp != null">{{data_model.cp}}</span>
                <span *ngIf="data_model.cp == null">M/A</span>,
                <span style="font-weight: bold;">Ciudad:</span> CDMX,
                <span style="font-weight: bold;">Alcaldia:</span> {{getName(data_model.idCatMunicipio)}}
              </span>
            </div>
          </div>



          <div class="d-none d-md-block">
            <div class="pagar_paga_btn form-group">
              <button class="btn pagar_atras Reboto-medium" (click)='back_step2()'>Regresar</button> &nbsp; &nbsp;

            </div>
          </div>

        </div>
        <div class="col-md-5">
          <div class="servicios servicios_bgcolor">
            <img src="./assets/wizard/Group 121.png" alt="" class="servicios_bgcolor_img">

            <ngb-accordion #a="ngbAccordion" activeIds="custom-panel-1">
              <ngb-panel id="custom-panel-1">
                afuera
                <ng-template ngbPanelHeader let-opened="opened">
                  <div class="d-flex align-items-center justify-content-between">
                    <p class="Reboto-medium pTotal">Solicitud de servicios</p>
                    <button ngbPanelToggle class="btn btn-link p-0">
                      <!--OPEN ICON-->
                      <span class="material-icons icon_color" *ngIf="!opened">
                        expand_more
                      </span>
                      <!--CLOSE ICON-->
                      <span class="material-icons icon_color" *ngIf="opened">
                        expand_less
                      </span>
                    </button>
                  </div>
                </ng-template>

                <ng-template ngbPanelContent>

                  <div class="servicios_justify">
                    <div *ngFor="let item of Productos_listado">
                      <!-- <img style="width: 16px; cursor: pointer;" src="https://img.icons8.com/ios/50/000000/delete-sign--v1.png"/>-->
                      <img style="width: 16px; cursor: pointer;" *ngIf="Productos_listado.length > 1" (click)="modify_list(item)"
                        src="https://img.icons8.com/material-outlined/64/000000/trash--v1.png" />
                      <span class="productlist">
                        {{item.cantidadUnidades}} {{item.Nombre}} 
                      </span>
                      <span class="productlist" *ngIf="item.cantidadHoras != null && item.especificarTiempo != null"
                        style="font-style: italic;"> ({{item.cantidadHoras}} hrs)</span>
                      <span class="productlist_precio"> {{item.Precio *
                        item.cantidadUnidades * item.cantidadHoras | currency}}
                      </span>
                    </div>
                    <div *ngIf="flete > 0">
                      <img src="./assets/home-dos/ship.png" style="width: 28px;">
                      <span class="productlist">
                        &nbsp;&nbsp;Servicio de flete (Mobiliario)
                      </span>
                      <span class="productlist_precio">
                        $500.00
                      </span>
                    </div>
                    <div class="separator"></div>

                    <div class="total">
                      <span class="p">Subtotal del carrito</span>
                      <span class="p">{{Subtotal | currency}}</span>
                    </div>

                    <div class="total">
                      <span class="p">IVA</span>
                      <span class="p">{{IVA | currency}}</span>
                    </div>
                  </div>
                </ng-template>
              </ngb-panel>
            </ngb-accordion>
            <div class="servicios_justify" style="padding: 20px;">
              <div class="separator"></div>

              <div class="total">
                <span class="p Reboto-medium">Servicios</span>
                <span class="p Reboto-medium">{{Productos_listado.length}}</span>
              </div>

              <div class="separator"></div>

              <div class="total">
                <span class="pTotal Reboto-medium">Total</span>
                <span class="p Reboto-medium">{{total | currency}}</span>
              </div>
              <div class="pagar_contenedor_botones form-group d-none d-md-block"
                style="align-content: center; text-align: center; padding-top: 15px;"
                *ngIf="Productos_listado.length != 0">
                <!-- <button class="btn pagar_siguiente Reboto-medium" (click)="next()">Pagar</button> -->
                <button class="btn pagar__siguiente Reboto-medium" (click)="pagarOpciones(1)">Continuar</button>
              </div>
            </div>
            <div class="pagar_paga_botones  d-block d-md-none">
              <button class="btn pagar_atras Reboto-medium" (click)='back_step2()'>Regresar</button> &nbsp;
              &nbsp;
              <button class="btn pagar__siguiente Reboto-medium" (click)="pagarOpciones(2)">Continuar</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!----------------------------------------------------------paso 3b ------------------------------->
    <div class="container" [ngClass]="step1">
      <div class="titulos_stepper_paga">
        <img src="./assets/wizard/step_tres.png" alt="" class="titulos_stepper_img">
        &nbsp;
        <span class="Reboto-medium">Confirma y Paga</span>
      </div>
      <div class="row contenedor_cuatro">
        <div class="col-md-7">
          <div class="eventos_seleccionados">
            <p class="Reboto-medium eventos_seleccionados_titulo" style="font-size: 22px;">
              <img src="./assets/Home/evento_user.png" width="50px">
              Monto total: {{total | currency}}
            </p>

            <div class="eventos_seleccionados_flex">
              <span class="Reboto-medium eventos_seleccionados_titulo">Inicio&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
                  class="eventos_seleccionados_descripcion">{{data_model.fechaHoraInicio | date:
                  'dd/MM/yyyy - hh:mm a'}}</span></span>
            </div>
            <div class="eventos_seleccionados_flex">
              <span
                class="Reboto-medium eventos_seleccionados_titulo">Servcios&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
                  class="eventos_seleccionados_descripcion">{{Productos_listado.length}}</span></span>
            </div>
            <div class="form-check">

              <!-- <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault"> -->
              <input class="form-check-input" type="checkbox" [(ngModel)]="req_factura">
              <label class="Reboto-medium eventos_seleccionados_titulo" for="flexCheckDefault"
                style="font-weight: bold;">
                Requiero Factura
              </label>
            </div>
          </div>
          <div>
            <p class="titleHeader Reboto-medium">¬øC√≥mo quieres pagar?</p>
          </div>
          <div class="container">
            <div class="row">
              <button class="button-8" (click)="view_pay_method('card')">
                <img width="32px;" src="https://img.icons8.com/ultraviolet/40/000000/bank-card-back-side.png" />
                Tarjeta
              </button>
              <button class="button-8" (click)="view_pay_method('paypal')">
                <img width="30px;"
                  src="https://img.icons8.com/external-tal-revivo-color-tal-revivo/24/4a90e2/external-paypal-an-online-payments-system-operating-worldwide-logo-color-tal-revivo.png" />
                Pay Pal
              </button>
              <button class="button-8" (click)="view_pay_method('oxxo')" *ngIf="total <= 10000">
                <img width="32px" src="https://img.icons8.com/fluency/48/000000/online-store.png" />
                Oxxo
              </button>
            </div>
          </div>
          <!-- <div #paypal class="pago_tarjeta" style=" height: auto;">  
            
            </div> -->
          <div [ngClass]="card_css.paypal">
            <div class="container">
              <div class="div_card_stripe">
                <span class="p Reboto-medium">Pago PayPal </span>
                <br>
                <span class="p" style="font-size: 14px;">Utiliza tu cuenta haciendo click: </span>
                <div class="div_card_stripe">
                  <ngx-paypal [config]="payPalConfig" style=" height: auto;">
                  </ngx-paypal>
                  <div style="font-size: large; color: red; font-weight: bolder;" *ngIf="error_alguardar">
                    Ha ocurrido un error al guardar el evento, por favor contacta a administraci√≥n
                  </div>
                </div>


              </div>
            </div>

          </div>
          <div class="container" [ngClass]="card_css.oxxo">
            <div class="container">
              <div class="div_card_stripe">
                <span class="p Reboto-medium">Pago En Oxxo</span>
                <br>
                <span class="p" style="font-size: 14px;">Indicanos tus datos de pago: </span>
                <div class="">
                  <form id="payment-form" style="width: 100%; padding: 3%;">
                    <div class="form-row">
                      <label for="name">
                        Nombre
                      </label>
                      <input id="name" name="name" (ngModelChange)="oxxo_Change($event)" required class="form-control"
                        [(ngModel)]="nombre_oxxo">
                    </div>

                    <div class="form-row">
                      <label for="email">
                        Email
                      </label>
                      <input id="email" name="email" (ngModelChange)="oxxo_Change($event)" required class="form-control"
                        [(ngModel)]="email_oxxo">
                    </div>
                    <!-- Used to display form errors. -->
                    <div id="error-message" role="alert"
                      style="color: red; padding-top: 2px; padding-bottom: 2px; font-size: 13px;">
                    </div>


                    <button id="submit-button" class="button-9" style="padding-top: 2px; font-size: 14px;"
                      role=" button" (click)="paymentintent_params('oxxo');">
                      <img width="35px" src="https://img.icons8.com/fluency/48/000000/online-store.png" />
                      GENERAR VOUCHER
                    </button>
                    <br>
                    <span
                      style="margin: 1%; margin-top: 4%; text-align: center; font-style: italic; color: rgb(102, 101, 101); font-size: small;">
                      Desarrollado por
                    </span>
                    <img width="33px" src="https://img.icons8.com/color/48/4a90e2/stripe.png" />
                  </form>
                </div>
              </div>
            </div>
          </div>
          <div class="container eventos_seleccionados" [ngClass]="card_css.card">
            <div class="div_card_stripe">
              <span class="p Reboto-medium">Pago con tarjeta </span>
              <br>
              <span class="p" style="font-size: 14px;">Ingresa los datos de la tarjeta: |{{ejecutotarjeta}}|</span>

              <div id="card-element" style="background-color: white;" class="div_card_stripe"></div>
              <div id="card-errors" style="color: red; padding-top: 2px; padding-bottom: 2px;"></div>
              <button id="button" class="button-9" role="button" (click)="paymentintent_params('card');">
                <img width="32px;" src="https://img.icons8.com/ultraviolet/40/000000/bank-card-back-side.png" />
                PAGAR
              </button>
              <br>
              <span
                style="margin: 1%; margin-top: 4%; text-align: center; font-style: italic; color: rgb(102, 101, 101); font-size: small;">
                Desarrollado por
              </span>
              <img width="33px" src="https://img.icons8.com/color/48/4a90e2/stripe.png" />
            </div>
          </div>

          <button id="stripe_click" style="display: none;" (click)='saveEvent(1, 1, "Stripe-CC")'>Finalizar</button>
          <button id="stripe_click_o" style="display: none;" (click)='saveEvent(1, 1, "Stripe-OXXO")'>Finalizar</button>
          <div class="d-none d-md-block">
            <div class="pagar_paga_btn form-group">
              <button class="btn pagar_atras Reboto-medium"
                (click)='step = 0; step0 = "class-view"; step1 = "class-none"; '>Regresar</button>
              <!-- <button class="btn pagar__siguiente Reboto-medium" (click)="saveEvent(1)">Continuar</button> -->
            </div>
          </div>

        </div>
        <div class="col-md-5">
          <div class="servicios servicios_bgcolor">
            <img src="./assets/wizard/Group 121.png" alt="" class="servicios_bgcolor_img">

            <ngb-accordion #a="ngbAccordion" activeIds="custom-panel-1">
              <ngb-panel id="custom-panel-1">
                afuera
                <ng-template ngbPanelHeader let-opened="opened">
                  <div class="d-flex align-items-center justify-content-between">
                    <p class="Reboto-medium pTotal">Detalle del pedido</p>
                    <button ngbPanelToggle class="btn btn-link p-0">
                      <!--OPEN ICON-->
                      <span class="material-icons icon_color" *ngIf="!opened">
                        expand_more
                      </span>
                      <!--CLOSE ICON-->
                      <span class="material-icons icon_color" *ngIf="opened">
                        expand_less
                      </span>
                    </button>
                  </div>
                </ng-template>

                <ng-template ngbPanelContent>

                  <div class="servicios_justify">
                    <div *ngFor="let item of Productos_listado">
                      <!-- <img style="width: 16px; cursor: pointer;" src="https://img.icons8.com/ios/50/000000/delete-sign--v1.png"/>-->
                      <img style="width: 16px; cursor: pointer;" *ngIf="Productos_listado.length > 1" (click)="modify_list(item)"
                        src="https://img.icons8.com/material-outlined/64/000000/trash--v1.png" />
                      <span class="productlist">
                        {{item.cantidadUnidades}} {{item.Nombre}}
                      </span>
                      <span class="productlist" *ngIf="item.cantidadHoras != null && item.especificarTiempo != null"
                        style="font-style: italic;"> ({{item.cantidadHoras}} hrs)</span>
                      <span class="productlist_precio"> {{item.Precio *
                        item.cantidadUnidades * item.cantidadHoras | currency}}
                      </span>
                    </div>
                    <div *ngIf="flete > 0">
                      <img src="./assets/home-dos/ship.png" style="width: 28px;">
                      <span class="productlist">
                        &nbsp;&nbsp;Servicio de flete (Mobiliario)
                      </span>
                      <span class="productlist_precio">
                        $500.00
                      </span>
                    </div>
                    <div class="separator"></div>
  
                    <div class="total">
                      <span class="p">Subtotal del carrito</span>
                      <span class="p">{{Subtotal | currency}}</span>
                    </div>
  
                    <div class="total">
                      <span class="p">IVA</span>
                      <span class="p">{{IVA | currency}}</span>
                    </div>
                  </div>
                </ng-template>
              </ngb-panel>
            </ngb-accordion>
            <div class="servicios_justify" style="padding: 20px;">
              <div class="separator"></div>

              <div class="total">
                <span class="p Reboto-medium">Servicios</span>
                <span class="p Reboto-medium">{{Productos_listado.length}}</span>
              </div>

              <div class="separator"></div>

              <div class="total">
                <span class="pTotal Reboto-medium">Total</span>
                <span class="p Reboto-medium">{{total | currency}}</span>
              </div>
              <div class="pagar_paga_botones  d-block d-md-none" style="text-align: center;">
                <button class="btn pagar_atras Reboto-medium"
                  (click)='step = 0; step0 = "class-view"; step1 = "class-none"; '>Regresar</button>
              </div>
              <!-- <div class="pagar_contenedor_botones form-group" *ngIf="Productos_listado.length != 0">
                <button class="btn pagar_siguiente Reboto-medium" (click)="next()">Pammgar</button>
              </div> -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!--------------------------------------------paso 4-------------------------------------->
  <!--------------------------------------------paso 4-------------------------------------->
  <!--------------------------------------------paso 4-------------------------------------->

  <div class="container" [ngClass]="steps_css.cuatro">
    <div class="titulos_stepper_paga">
      &nbsp;
    </div>
    <div class="row">
      <div class="step_final_center">
        <div class="step_final">
          <p class="step_final_color Reboto-medium step_final_size">¬°Disfruta de tu evento!</p>
          <img src="./assets/wizard/Group 92.png" alt="" class="step_final_img">
          <p class="step_final_color Reboto-medium step_final_size_">Gracias por tu preferencia</p>
          <p class="step_final_descripcion">Un asesor se pondr√° en contacto contigo en 24 hrs. h√°biles <br>
            Te acompa√±ar√° y se asegurar√° de que tu evento sea
            un √©xito.
          </p>
        </div>
      </div>

      <div class="contenedor_uno_contenedor_botones ancho">
        <button class="btn contenedor_uno_siguiente Reboto-medium" onclick="location.reload();">Armar otro
          evento</button>
        <button class="btn contenedor_uno_atras Reboto-medium" [routerLink]="['/']"
          routerLinkActive="router-link-active">Home</button>
      </div>
    </div>
  </div>

</div>